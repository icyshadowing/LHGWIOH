<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LHGWIOH </title>
<style>
body {
  font-family: Arial, sans-serif;
  background:#f7f8fb;
  margin:0;
  padding:20px;
  color:#111;
}
h1,h2{margin:0 0 12px 0;}
.container { max-width:700px; margin:auto; }

.card {
  background:#fff;
  padding:24px 20px;
  border-radius:12px;
  box-shadow:0 4px 12px rgba(0,0,0,0.08);
  margin-bottom:20px;
  text-align:center;
}

/* Quiz page labels and inputs alignment */
#quizCard label {
  font-size: 17px;
  font-weight: 600;
  text-align: left;
  display: block;
  margin: 0 0 4px 0;
  width: 90%;
  max-width: 600px;
  margin-left: auto;
  margin-right: auto;
}

#quizCard input, #quizCard textarea {
  width: 90%;
  max-width: 600px;
  display: block;
  margin: 0 auto 12px auto;
  padding:10px;
  font-size:15px;
  border-radius:8px;
  border:1px solid #ccc;
}

/* Buttons */
button{background:#2563eb;color:#fff;font-weight:600;border:none;cursor:pointer;padding:10px 16px;margin:6px;}
button.ghost{background:transparent;color:#2563eb;border:1px solid rgba(37,99,235,0.3);}

/* Review page formatting */
#reviewCard {
  text-align: left;
}
#reviewCard > div { margin-bottom: 10px; }
#correctTitle, #userTitle, #correctVerse, #userVerseBox {
  font-size:18px;
  line-height:1.6;
  margin-left:0;
  text-align:left;
}
.user-verse .word {
  font-size:18px;
  line-height:1.6;
  margin-left:0;
  padding:0;
}
.ok{color:#111;}
.spelling,.extra{text-decoration:line-through; color:#0b66ff;}
.missing{color:#ff2e2e;}
</style>
</head>
<body>
<div class="container">
<h1>LHGWIOH</h1>

<!-- Pack Selection -->
<div id="packSelectCard" class="card">
  <h2>Select a Pack</h2>
  <select id="packSelect"></select>
  <button id="startQuizBtn">Start Quiz</button>
</div>

<!-- Quiz Page -->
<div id="quizCard" class="card" style="display:none;">
  <h2 id="quizRef"></h2>
  <label>Title</label>
  <input id="inputTitle">
  <label>Verse</label>
  <textarea id="inputVerse"></textarea>
  <button id="submitAnswerBtn">Submit</button>
  <button id="skipBtn" class="ghost">Show Answer</button>
</div>

<!-- Review Page -->
<div id="reviewCard" class="card" style="display:none;">
  <h2 id="reviewHeading">Review</h2>

  <div><strong>Correct Title:</strong> <span id="correctTitle"></span></div>
  <div id="correctVerse" class="user-verse"></div>

  <div><strong>Your Title:</strong> <span id="userTitle"></span></div>
  <div id="userVerseBox" class="user-verse"></div>

  <button id="nextBtn">Next</button>
  <button id="retryBtn" class="ghost">Try Again</button>
  <button id="backBtn" class="ghost">Back to Main Page</button>


    <strong>Legend:</strong> Black = correct, Blue = wrong/extra, Red = missing
  </div>
</div>
</div>

<script>
// === Verse packs ===
const VERSE_PACKS = {
  "Assurances":[
    {title:"Assurance Of Salvation",ref:"1 John 5:11-12",verse:"And this is the testimony: God has given us eternal life, and this life is in his Son. He who has the Son has life; he who does not have the Son of God does not have life."},
    {title:"Assurance Of Answered Prayer",ref:"John 16:24",verse:"Until now you have not asked for anything in my name. Ask and you will receive, and your joy will be complete."}
  ],
  "Faith":[
    {title:"Faith Over Fear",ref:"2 Timothy 1:7",verse:"For God has not given us a spirit of fear, but of power, love, and a sound mind."},
    {title:"Faith Brings Healing",ref:"James 5:15",verse:"And the prayer of faith will save the sick, and the Lord will raise him up."}
  ],
  "Lordship": [
    { title: "The Creator", ref: "John 1:2-3", verse: "He was with God in the beginning. Through him all things were made; without him nothing was made that has been made." },
    { title: "The Lord of all creation", ref: "Colossians 1:16-17", verse: "For by him all things were created: things in heaven and on earth, visible and invisible, whether thrones or powers or rulers or authorities; all things were created by him and for him. He is before all things, and in him all things hold together." },
    { title: "The head of Church", ref: "Colossians 1:18", verse: "And he is the head of the body, the church; he is the beginning and the firstborn from among the dead, so that in everything he might have the supremacy." },
    { title: "Far above all power", ref: "Ephesians 1:21", verse: "Far above all rule and authority, power and dominion, and every title that can be given, not only in the present age but also in the one to come." },
    { title: "The Lord of everyone", ref: "Philippians 2:10-11", verse: "That at the name of Jesus every knee should bow, in heaven and on earth and under the earth, and every tongue confess that Jesus Christ is Lord, to the glory of God the Father." },
    { title: "The Lord of both the dead and the living", ref: "Romans 14:9", verse: "For this very reason, Christ died and returned to life so that he might be the Lord of both the dead and the living." },
    { title: "Bought with Christ's life price", ref: "1 Corinthians 6:19-20", verse: "Do you not know that your body is a temple of the Holy Spirit, who is in you, whom you have received from God? You are not your own; you were bought at a price. Therefore honor God with your body." },
    { title: "Make the decision of commitment to the Lordship", ref: "2 Corinthians 5:15", verse: "And he died for all, that those who live should no longer live for themselves but for him who died for them and was raised again." },
    { title: "Satisfying all our needs", ref: "Matthew 6:33", verse: "But seek first his kingdom and his righteousness, and all these things will be given to you as well." },
    { title: "Abundant reward", ref: "Mark 10:29-30", verse: "\"I tell you the truth,\" Jesus replied, \"no one who has left home or brothers or sisters or mother or father or children or fields for me and the gospel will fail to receive a hundred times as much in this present age (homes, brothers, sisters, mothers, children and fields--and with them, persecutions) and in the age to come, eternal life." },
    { title: "Giving His promise", ref: "Genesis 22:16-17", verse: "And said, \"I swear by myself, declares the LORD, that because you have done this and have not withheld your son, your only son, I will surely bless you and make your descendants as numerous as the stars in the sky and as the sand on the seashore. Your descendants will take possession of the cities of their enemies." },
    { title: "Accompanying us", ref: "1 Chronicles 28:9", verse: "\"And you, my son Solomon, acknowledge the God of your father, and serve him with wholehearted devotion and with a willing mind, for the LORD searches every heart and understands every motive behind the thoughts. If you seek him, he will be found by you; but if you forsake him, he will reject you forever." },
    { title: "Giving His power", ref: "2 Chronicles 16:9", verse: "For the eyes of the LORD range throughout the earth to strengthen those whose hearts are fully committed to him. You have done a foolish thing, and from now on you will be at war." },
    { title: "Protecting us", ref: "Psalm 91:14", verse: "\"Because he loves me,\" says the LORD, \"I will rescue him; I will protect him, for he acknowledges my name." },
    { title: "Honoring us", ref: "1 Samuel 2:30b", verse: "Those who honor me I will honor, but those who despise me will be disdained." },
    { title: "Self", ref: "Luke 9:23", verse: "Then he said to them all: \"If anyone would come after me, he must deny himself and take up his cross daily and follow me." },
    { title: "Relationship with others", ref: "Proverbs 16:7", verse: "When a man's ways are pleasing to the LORD, he makes even his enemies live at peace with him." },
    { title: "Life paths", ref: "Proverbs 3:5-6", verse: "Trust in the LORD with all your heart and lean not on your own understanding; in all your ways acknowledge him, and he will make your paths straight." },
    { title: "Worldly desires", ref: "Ephesians 4:22-24", verse: "You were taught, with regard to your former way of life, to put off your old self, which is being corrupted by its deceitful desires; to be made new in the attitude of your minds; and to put on the new self, created to be like God in true righteousness and holiness." },
    { title: "Lusts", ref: "2 Timothy 2:22", verse: "Flee also youthful lusts: but follow righteousness, faith, charity, peace, with them that call on the Lord out of a pure heart." },
    { title: "Possessions", ref: "1 Timothy 6:7-9", verse: "For we brought nothing into the world, and we can take nothing out of it. But if we have food and clothing, we will be content with that. People who want to get rich fall into temptation and a trap and into many foolish and harmful desires that plunge men into ruin and destruction." },
    { title: "Time managing", ref: "Ephesians 5:15-16", verse: "Be very careful, then, how you live--not as unwise but as wise, making the most of every opportunity, because the days are evil." },
    { title: "God's calling", ref: "Mark 1:20", verse: "Without delay he called them, and they left their father Zebedee in the boat with the hired men and followed him." },
    { title: "Paul", ref: "Philippians 1:20", verse: "I eagerly expect and hope that I will in no way be ashamed, but will have sufficient courage so that now as always Christ will be exalted in my body, whether by life or by death." },
    { title: "Timothy", ref: "Philippians 2:21-22", verse: "For everyone looks out for his own interests, not those of Jesus Christ. But you know that Timothy has proved himself, because as a son with his father he has served with me in the work of the gospel." },
    { title: "Our faith fathers", ref: "Hebrews 11:36-38", verse: "Some faced jeers and flogging, while still others were chained and put in prison. They were stoned; they were sawed in two; they were put to death by the sword. They went about in sheepskins and goatskins, destitute, persecuted and mistreated-- the world was not worthy of them. They wandered in deserts and mountains, and in caves and holes in the ground." }
  ],

};

// === Elements ===
const packSelect = document.getElementById('packSelect');
const startQuizBtn = document.getElementById('startQuizBtn');
const quizCard = document.getElementById('quizCard');
const quizRef = document.getElementById('quizRef');
const inputTitle = document.getElementById('inputTitle');
const inputVerse = document.getElementById('inputVerse');
const submitAnswerBtn = document.getElementById('submitAnswerBtn');
const skipBtn = document.getElementById('skipBtn');
const reviewCard = document.getElementById('reviewCard');
const reviewHeading = document.getElementById('reviewHeading');
const correctTitle = document.getElementById('correctTitle');
const correctVerse = document.getElementById('correctVerse');
const userTitleEl = document.getElementById('userTitle');
const userVerseBox = document.getElementById('userVerseBox');
const nextBtn = document.getElementById('nextBtn');
const retryBtn = document.getElementById('retryBtn');
const backBtn = document.getElementById('backBtn');

// === Init ===
let session = null;
function populatePackSelect() {
  packSelect.innerHTML = "";
  for (let packName in VERSE_PACKS) {
    const opt = document.createElement("option");
    opt.value = packName;
    opt.textContent = packName;
    packSelect.appendChild(opt);
  }
}
populatePackSelect();

function shuffle(a){
  for(let i=a.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [a[i],a[j]]=[a[j],a[i]];
  }
  return a;
}

function renderNext(){
  if(session.remaining.length===0){
    alert("You have finished all verses in this pack!");
    backToMain();
    return;
  }

  session.current = session.remaining.pop();
  quizRef.textContent = session.current.ref;
  inputTitle.value = "";
  inputVerse.value = "";
}

// === Button actions ===
startQuizBtn.onclick = () => {
  const packName = packSelect.value;
  const pack = VERSE_PACKS[packName];
  session = { pack, remaining: shuffle(pack.slice()), current: null };
  document.getElementById('packSelectCard').style.display = 'none';
  reviewCard.style.display = 'none';
  quizCard.style.display = 'block';
  renderNext();
};
submitAnswerBtn.onclick = ()=> showReview(inputTitle.value.trim(),inputVerse.value.trim());
skipBtn.onclick = ()=> showReview("","");
nextBtn.onclick = ()=>{
  reviewCard.style.display='none';
  quizCard.style.display='block';
  renderNext();
};
retryBtn.onclick = ()=>{
  session.remaining.push(session.current);
  reviewCard.style.display='none';
  quizCard.style.display='block';
  renderNext();
};
backBtn.onclick = backToMain;

function backToMain(){
  reviewCard.style.display='none';
  quizCard.style.display='none';
  document.getElementById('packSelectCard').style.display='block';
  populatePackSelect();
}

// === Comparison ===
function tokenize(s){ return s ? s.trim().split(/\s+/) : []; }
function normalize(w){ return w.replace(/[\W_]+/g,'').toLowerCase(); }
function strike(text){ return text.split("").map(c=>c+"\u0336").join(""); }

function highlightComparison(correct, user){
  const cw = tokenize(correct);
  const uw = tokenize(user);

  // Build edit distance matrix
  const dp = Array(cw.length+1).fill(null).map(()=>Array(uw.length+1).fill(0));
  for(let i=0;i<=cw.length;i++) dp[i][0]=i;
  for(let j=0;j<=uw.length;j++) dp[0][j]=j;
  for(let i=1;i<=cw.length;i++){
    for(let j=1;j<=uw.length;j++){
      const cost = normalize(cw[i-1])===normalize(uw[j-1])?0:1;
      dp[i][j] = Math.min(dp[i-1][j]+1, dp[i][j-1]+1, dp[i-1][j-1]+cost);
    }
  }

  // Traceback
  let i=cw.length, j=uw.length, result=[];
  while(i>0 || j>0){
    if(i>0 && j>0 && normalize(cw[i-1])===normalize(uw[j-1])){
      result.unshift(`<span class="word ok">${uw[j-1]}</span>`);
      i--; j--;
    } else if(j>0 && (i===0 || dp[i][j-1]<=dp[i-1][j])){
      result.unshift(`<span class="word extra">${strike(uw[j-1])}</span>`);
      j--;
    } else if(i>0 && (j===0 || dp[i-1][j]<dp[i][j-1])){
      result.unshift(`<span class="word missing">(${cw[i-1]})</span>`);
      i--;
    } else {
      // substitution
      result.unshift(`<span class="word extra">${strike(uw[j-1])}</span>`);
      result.push(`<span class="word missing">(${cw[i-1]})</span>`);
      i--; j--;
    }
  }
  return result.join(" ");
}

function showReview(uTitle, uVerse){
  quizCard.style.display='none';
  reviewCard.style.display='block';
  const c = session.current;

  reviewHeading.textContent = c.ref; // show verse reference as heading
  correctTitle.textContent = c.title;
  correctVerse.textContent = c.verse;
  userTitleEl.textContent = uTitle || "â€”";
  userVerseBox.innerHTML = highlightComparison(c.verse,uVerse);
}
</script>
